var y=(a,s,n)=>{if(!s.has(a))throw TypeError("Cannot "+n)};var A=(a,s,n)=>(y(a,s,"read from private field"),n?n.call(a):s.get(a)),$=(a,s,n)=>{if(s.has(a))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(a):s.set(a,n)},C=(a,s,n,o)=>(y(a,s,"write to private field"),o?o.call(a,n):s.set(a,n),n);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const r of t.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(e){if(e.ep)return;e.ep=!0;const t=n(e);fetch(e.href,t)}})();const M=a=>a.flatMap(s=>{var n;return(n=s.attributes)==null?void 0:n.varnas}),m=(a,s)=>a.filter(n=>n.type===s),O=a=>({"ா":"ஆ","ி":"இ","◌ீ":"ஈ","ு":"உ","ூ":"ஊ","ெ":"எ","ே":"ஏ","ை":"ஐ","ொ":"ஒ","ோ":"ஓ","ௌ":"ஔ"})[a]||"",L={அ:"vowels",ஆ:"vowels",இ:"vowels",ஈ:"vowels",உ:"vowels",ஊ:"vowels",எ:"vowels",ஏ:"vowels",ஐ:"vowels",ஒ:"vowels",ஓ:"vowels",ஔ:"vowels","ஃ":"vowels",க:"consonants",ங:"consonants",ச:"consonants",ஞ:"consonants",ட:"consonants",ண:"consonants",த:"consonants",ந:"consonants",ப:"consonants",ம:"consonants",ய:"consonants",ர:"consonants",ல:"consonants",வ:"consonants",ழ:"consonants",ள:"consonants",ற:"consonants",ன:"consonants",ஜ:"extra_consonants","ஶ":"extra_consonants",ஷ:"extra_consonants",ஸ:"extra_consonants",ஹ:"extra_consonants","்":"vowel_marks","ா":"vowel_marks","ி":"vowel_marks","ீ":"vowel_marks","ு":"vowel_marks","ூ":"vowel_marks","ெ":"vowel_marks","ே":"vowel_marks","ை":"vowel_marks","ொ":"vowel_marks","ோ":"vowel_marks","ௌ":"vowel_marks","ௗ":"vowel_marks","‍":"zwj","‌":"zwnj","௦":"symbols","௧":"symbols","௨":"symbols","௩":"symbols","௪":"symbols","௫":"symbols","௭":"symbols","௮":"symbols","௯":"symbols","௰":"symbols","௱":"symbols","௲":"symbols","ௐ":"symbols","।":"symbols","॥":"symbols"};var g;(function(a){a.Vowel="vowels",a.Symbol="symbols",a.VowelMark="vowel_marks",a.Yogavaha="yogavaahas",a.Accent="accents",a.Virama="virama",a.Nukta="nukta",a.ZWNJ="zwnj",a.ZWJ="zwj",a.Consonant="consonants",a.ExtraConsonant="extra_consonants",a.Whitespace="whitespace",a.Unrecognised="unrecognised",a.EndOfInput="end_of_input"})(g||(g={}));const N="ௐ",F=["௧","௨","௩"];var w;class V{constructor(s){$(this,w,void 0);C(this,w,n=>n===void 0?"end_of_input":/\s/.test(n)?"whitespace":L[n]??"unrecognised"),this.isVowel=()=>this.type==="vowels",this.isConsonant=()=>["consonants","extra_consonants"].includes(this.type),this.isOm=()=>this.value===N,this.isSymbol=()=>this.type==="symbols",this.isVowelMark=()=>this.type==="vowel_marks",this.isYogavaha=()=>this.type==="yogavaahas",this.isAccent=()=>this.type==="accents",this.isVirama=()=>this.type==="virama",this.isNukta=()=>this.type==="nukta",this.isMatra=()=>F.includes(this.value),this.isJoiner=()=>["zwnj","zwj"].includes(this.type),this.isWhitespace=()=>this.type==="whitespace",this.isUnrecognised=()=>this.type==="unrecognised",this.isEndOfInput=()=>this.type==="end_of_input",this.isVowelAttachment=()=>this.isVowelMark()||this.isAccent(),this.isConsonantAttachment=()=>this.isVirama()||this.isYogavaha()||this.isAccent()||this.isVowelMark()||this.isMatra(),this.isVowelMarkAttachment=()=>this.isYogavaha()||this.isAccent()||this.isMatra(),this.value=s,this.type=A(this,w).call(this,s)}}w=new WeakMap;var i;(function(a){a.Akshara="akshara",a.Symbol="symbol",a.Whitespace="whitespace",a.Invalid="invalid",a.Unrecognised="unrecognised"})(i||(i={}));class D{constructor(s,n,o,e){this.type=s,this.value=n,this.from=o,this.to=o+(n.length-1),this.attributes=e}}var l;(function(a){a.Svara="svara",a.Vyanjana="vyanjana"})(l||(l={}));const b={Virama:"◌்",InherentA:"அ",Om:["ஓ","ம்"]};class v{constructor(s,n){this.type=s,this.value=n}}var j;(function(a){a[a.Initial=0]="Initial",a[a.Vowel=1]="Vowel",a[a.Consonant=2]="Consonant",a[a.ConjunctConsonant=3]="ConjunctConsonant"})(j||(j={}));const W=a=>{const s=[];let n=0,o="",e="",t="",r=[],h=0;const B=()=>{n=0,o="",e="",t="",r=[],h=0},c=(f,k)=>{s.push(new D(f,o,n,k)),B()};for(let f=0,k=a.length;f<k;f+=1){const u=new V(a[f]),d=new V(a[f+1]);switch(o+=u.value,h){case 0:if(n=f,u.isOm()){c(i.Akshara,{varnas:r.concat([new v(l.Svara,b.Om[0]),new v(l.Vyanjana,b.Om[1])])});break}if(u.isSymbol()){c(i.Symbol);break}if(u.isWhitespace()){c(i.Whitespace);break}if(u.isUnrecognised()){c(i.Unrecognised);break}if(u.isVowel()){if(d.isVowelAttachment()){h=1;break}c(i.Akshara,{varnas:r.concat([new v(l.Svara,o)])});break}if(u.isConsonant()){if(t+=u.value,d.isNukta()||d.isConsonantAttachment()){h=2;break}c(i.Akshara,{varnas:r.concat([new v(l.Vyanjana,t+b.Virama),new v(l.Svara,b.InherentA)])});break}c(i.Invalid);break;case 1:if(u.isAccent()){c(i.Akshara,{varnas:r.concat([new v(l.Svara,o)])});break}if(u.isYogavaha()){if(d.isAccent())break;c(i.Akshara,{varnas:r.concat([new v(l.Svara,o)])});break}break;case 2:if(u.isNukta()){if(t+=u.value,d.isConsonantAttachment())break;c(i.Akshara,{varnas:r.concat([new v(l.Vyanjana,t+b.Virama),new v(l.Svara,b.InherentA)])});break}if(u.isVirama()){if(t+=u.value,d.isJoiner())break;if(d.isConsonant()){r=r.concat([new v(l.Vyanjana,t)]),h=3;break}c(i.Akshara,{varnas:r.concat([new v(l.Vyanjana,t)])});break}if(u.isJoiner()){if(t+=u.value,d.isJoiner())break;if(d.isConsonant()){r=r.concat([new v(l.Vyanjana,t)]),h=3;break}c(i.Akshara,{varnas:r.concat([new v(l.Vyanjana,t)])});break}if(u.isVowelMarkAttachment()){if(e=(e||b.InherentA)+u.value,d.isAccent())break;c(i.Akshara,{varnas:r.concat([new v(l.Vyanjana,t+b.Virama),new v(l.Svara,e)])});break}if(u.isVowelMark()){if(e=O(u.value),d.isVowelMarkAttachment())break;c(i.Akshara,{varnas:r.concat([new v(l.Vyanjana,t+b.Virama),new v(l.Svara,e)])});break}case 3:if(t=u.value,d.isNukta()||d.isConsonantAttachment()){h=2;break}c(i.Akshara,{varnas:r.concat([new v(l.Vyanjana,t+b.Virama),new v(l.Svara,b.InherentA)])});break}}return s},z=a=>{const s=W(a),n=m(s,i.Akshara),o=M(n),e=a.split(""),t=m(s,i.Symbol),r=m(s,i.Invalid),h=m(s,i.Whitespace),B=m(s,i.Unrecognised);return{all:s,aksharas:n,varnas:o,chars:e,symbols:t,invalid:r,whitespaces:h,unrecognised:B}},J={analyse:z,TokenType:i,VarnaType:l};var _=J;const E=["counter-total","counter-total-aksharas","counter-total-symbols","counter-total-others","counter-total-varnas","counter-total-svaras","counter-total-vyanjanas","counter-total-spaces","counter-total-chars","counter-total-invalids"].map(a=>document.querySelector(`#app .stats .${a} .counter-content`)),S=(a,s)=>a.filter(n=>n.type===s),U=a=>a.filter(s=>s.value===" "),P=a=>({total:a.all.filter(n=>n.type!==i.Invalid).length,totalAksharas:a.aksharas.length,totalChars:a.aksharas.length,totalInvalidChars:a.invalid.length,totalOtherChars:a.whitespaces.length+a.unrecognised.length,totalSpaces:U(a.whitespaces).length,totalSvaras:S(a.varnas,l.Svara).length,totalSymbols:a.symbols.length,totalVarnas:a.varnas.length,totalVyanjanas:S(a.varnas,l.Vyanjana).length}),Y=a=>{var o,e;const s=E.at(-1);(o=s==null?void 0:s.parentElement)==null||o.classList.remove("error");const n=[a.total,a.totalAksharas,a.totalSymbols,a.totalOtherChars,a.totalVarnas,a.totalSvaras,a.totalVyanjanas,a.totalSpaces,a.totalChars,a.totalInvalidChars];E.forEach((t,r)=>t&&(t.innerHTML=n[r].toString())),a.totalInvalidChars>0&&((e=s==null?void 0:s.parentElement)==null||e.classList.add("error"))},q=a=>{const s=_.analyse(a),n=P(s);Y(n)},H=a=>a.split("").map(s=>"&#x"+s.charCodeAt(0).toString(16)+";").join(""),R=(a,s=300)=>{let n;return(...o)=>{clearTimeout(n),n=setTimeout(()=>{a.apply(null,o)},s)}},p=document.querySelector("#app .analysis-content"),Z=p==null?void 0:p.innerHTML,K=a=>{const s=/[\s।॥!,\.\(\)\{\}\[\]&=]/;return a.split(s).filter(o=>!!o).reduce((o,e)=>{const t=_.analyse(e),r=t.all.filter(c=>[i.Akshara,i.Invalid].includes(c.type)).map(({value:c,...f})=>({value:c,isInvalid:f.type===i.Invalid})),h=t.varnas.map(c=>c.value),B={word:e,aksharas:r,aksharasCount:t.aksharas.length,invalidCount:t.invalid.length,varnas:h,varnasCount:t.varnas.length};return B.aksharas.length<1?o:o.concat(B)},[])},G=a=>{const{aksharasCount:s,invalidCount:n,varnasCount:o}=a,e=H(a.word),t=`<span>${s}</span>`.concat(n?`<span class="invalid">${n}</span>`:""),r=a.aksharas.map(c=>c.isInvalid?`<span class="invalid">&nbsp;${c.value}&nbsp;</span>`:`<span>${c.value}</span>`).join("&nbsp;· "),h=`<span>${o}</span>`,B=a.varnas.join("&nbsp;· ");return`
    <div class="analysis-item">
      <div class="header">${e}</div>
      <div class="details">
        <div class="title">Aksharas</div>
        <div class="counters">${t}</div>
        <div class="content">${r||"N/A"}</div>
      </div>
      <div class="details">
        <div class="title">Varnas</div>
        <div class="counters">${h}</div>
        <div class="content">${B||"N/A"}</div>
      </div>
    </div>`},Q=a=>{if(!p)return;let s=Z||"N/A";a.length>0&&(s=a.map(G).join("")),p.innerHTML=s},X=R(a=>{const s=K(a);Q(s)}),x=document.querySelector("#app textarea"),I=()=>{const a=x.value;q(a),X(a)};x.addEventListener("input",I);window.addEventListener("load",I);
